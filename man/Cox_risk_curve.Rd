% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Cox_risk_curve.R
\name{Cox_risk_curve}
\alias{Cox_risk_curve}
\title{Individual Dynamic Risk Curve for Cox-PACE Model}
\usage{
Cox_risk_curve(
  i_data,
  model,
  pred_time,
  fixed_cov,
  tv_cov,
  tv_cov_regular,
  tv_continuous_cov,
  L,
  w,
  rtime,
  id
)
}
\arguments{
\item{i_data}{Individual patient's longitudinal follow-up data}

\item{model}{Fitted Cox-PACE model object from Cox_pace function}

\item{pred_time}{Sequence of prediction time points for the curve}

\item{fixed_cov}{Time-fixed covariates}

\item{tv_cov}{Time-varying covariates}

\item{tv_cov_regular}{Time-varying covariates with regular/deterministic progression (e.g., age)}

\item{tv_continuous_cov}{Continuous time-varying covariates with non-deterministic patterns}

\item{L}{Maximum prediction time used in model fitting}

\item{w}{Prediction window}

\item{rtime}{Column name for measurement time in data}

\item{id}{Column name for patient identifier in data}
}
\value{
A recorded plot object displaying the dynamic conditional survival probability curve
}
\description{
Generates dynamic conditional survival probability curves for individual patients
   based on the fitted Cox-PACE model, showing how survival probabilities evolve over
   follow-up time using the patient's longitudinal biomarker history.
}
\examples{
\dontrun{
# Load the example dataset
data(pbc2_example)

# First fit the Cox-PACE model
model_cox <- Cox_pace(
  data = pbc2_example,
  LMs = seq(0, 6, 0.5),
  w = 5,
  L = 6,
  id = "id",
  time = "time",
  rtime = "rtime",
  status = "status",
  fixed_cov = c(),
  tv_cov = c("age", "serBilir", "prothrombin", "albumin"),
  tv_cov_regular = c("age"),
  tv_continuous_cov = c("serBilir", "prothrombin", "albumin"),
  formula_cov = "age + serBilir + prothrombin + albumin",
  mea_error = 1
)

# Generate risk curve for patient with ID = 5
risk_plot <- Cox_risk_curve(
  i_data = pbc2_example[pbc2_example$id == 5, ],
  model = model_cox,
  pred_time = seq(0, 4, 0.1),
  fixed_cov = c(),
  tv_cov = c("age", "serBilir", "prothrombin", "albumin"),
  tv_cov_regular = c("age"),
  tv_continuous_cov = c("serBilir", "prothrombin", "albumin"),
  L = 6,
  w = 5,
  rtime = "rtime",
  id = "id"
)

# Display the plot
print(risk_plot)
}
}
